<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <title>UIjson.js Example : Add plugins</title>
 <meta name="keywords"    content="uijson.js,make forms,JSON UI,javascript,Jquery">
 <meta name="description" content="Tool for create and edit JSON model with a bootstrap Interface">
 <meta name="author"      content="Chris B">
 <meta name="viewport"    content="width=device-width, initial-scale=1">
 <meta http-equiv="Content-type" content="text/html; charset=utf-8" > 


<!--<script src="js/jquery.js"></script>-->
<!--<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>-->

<link rel="stylesheet" href="../JsTree/themes/default/style.min.css">
<link rel="stylesheet" href="../Bootstrap/css/bootstrap.css">

<script src="http://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
<script src="../jquery-ui.min.js"></script>
<script src="../Bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../JsTree/jstree.min.js" type="text/javascript"></script>

<script src="../UIjson.js"></script>


<script src="https://code.highcharts.com/highcharts.js"></script>


<style type="text/css">
/* page style */
#ban{

	   background-color    : #16243D;
	   color               : white;

}
#ban h1{

       padding-top         : 20px;    
	   padding-bottom      : 20px;

}
#desc h4 {
 
       padding-top         : 30px;
	   padding-bottom      : 30px;
	   margin-bottom       : 40px;
	   box-shadow          : 0px 4px 20px #91DFEC;
	   margin-top          : 40px;
}


/* footer */
html {
  position            : relative;
  min-height          : 100%;
}
body {

  margin-bottom       : 100px;
}
.footer {
  position            : absolute;
  bottom              : 0;
  width               : 100%;
  height              : 100px;
  background-color    : #f5f5f5;
  padding-top         : 20px;
  padding-bottom      : 20px;
  text-align          : center;
  background-color    : #16243D;
  color               : white;
 
}

/* modal code output */
pre .json-value{
                  color  : red;
}
/* export model button */
.btn-primary  {
                 background-color : #17375F;
}

</style>
<style type="text/css">
/* UIjson example style */

.UIjson_instance { padding-top : 20px; padding-bottom : 20px; }

.tree{
     overflow  :auto;
     overflow-y:hidden;
	 overflow-x:auto;
}

.tab-pane{
    margin-top:30px;
}

.jstree-icon.glyphicon-pencil,.glyphicon.glyphicon-cog{  color:blue; }

.ui-sortable-handle:hover{

  cursor:move;
}
.glyphicon.glyphicon-remove:hover,.glyphicon.glyphicon-plus:hover{

  cursor:pointer;
}
.tree_title:hover{}


</style>

<script type="text/javascript"> 

 
$(document).ready(function(){

var t,example001,config1;
    
example001  = {

               countries  : {    
			                   Tokyo   :{
							           data    : [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
							           message : "We did measures in morning,evening and night."
							   },
							   NewYork:{
							           data    : [-0.2, 0.8, 5.7, 11.3, 17.0, 2.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5],
							           message : "We did measures at the top of the highest mountain."
							   },
							   Berlin:{
							           data    : [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0],
							           message : "We did measures in random places."
							   },
							   London:{
							           data    : [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8],
							           message : "We did measures while we were touring with car."
							   }			   
			   }
			             

};
		  

config1 = {  
			"config"    : {dataHolder:{tabName:"Temperature"}}
};

var JsTreeModel = 
[
 { "text":"Countries","children":[

                                    {"text":"Tokyo"  ,"children":[],"icon":"glyphicon glyphicon-tint"}, 
																
                        			{"text":"NewYork","children":[],"icon":"glyphicon glyphicon-tint"},
																   
                        			{"text":"Berlin" ,"children":[],"icon":"glyphicon glyphicon-tint"},
																  
                        			{"text":"London" ,"children":[],"icon":"glyphicon glyphicon-tint"},
									
                     ] ,"icon":""}
];



createExample( config1 , example001 , 1 , JsTreeModel);


});


function JsonBeauty(key, value) {
	  
       if (typeof value === "string" || typeof value === "number" || typeof value === "boolean"  ) {
         return '<span class=json-value>'+value+'</span>';
       }
       return value;
}

function createExample( config , model , n , JsTreeModel){

var newPro1,newPro2,newPro3,newPro4,message,exampleSection,Sel,In,
     _html =  '<div class="row example">'
            +  '<div class="col-xs-12 col-sm-12 col-md-12">'
            +    '<div class="row config">'
            +      '<div class="col-xs-12 col-sm-12 col-md-12">'
            +          '<h4  style="display:none;">JSON Model</h4>'
			+          '<h4>Connecting UIjson with other plugins, JsTree.js and highCharts.js example</h4>'
			+          '<div class="comments"></div>'
			+          '<div class="row">'
			+             '<div class="UIjson_instance col-xs-12 col-sm-12 col-md-12" style="min-height:500px">'
			                                               // create some elements to put the Tree
									                       + '<div class="row">'
							                               +  '<div class="LeftColumn col-md-2 col-lg-2 col-sm-2"  >'
														   +      '<h5 class="tree_title" style="padding-left:10px;padding-right:10px;padding-bottom: 10px;font-weight: bold;text-decoration: underline;">Measures</h5>'
                                                           +      '<div class="tree"></div>'
                                                           +  '</div>'
                                                           +  '<div class="RightColumn col-md-10 col-lg-10 col-sm-10">'
                                                           +    '<div class="tabss">'
												           +       '<ul role="tablist" class="nav UIjson nav-tabs">'
												           +     '</div>'
                                                           +     '<div class="tab-content UIjson sections"></div>'
                                                           +  '</div>'
												           +'</div>'													
			+             '</div>'
			+          '</div>'
			+          '<div class="row">'
	        +             '<div  class="col-xs-12 col-sm-12 col-md-12">'
		    +	     		  '<button  style="margin-bottom:10px;" type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Export Model</button>'
			+             '</div>'				
			+         '</div></hr>'			
			+       '</div>'
			+    '</div>'
			+  '</div>'
			+'</div>';
			
    exampleSection = $(_html).addClass("insta"+n);

    Sel =   exampleSection.appendTo("#uijson_cont").find(".UIjson_instance").eq(0);
     In =   Sel.UIjson(config);
	 
	 
	 /* Create JsTree */ 
var  TheJsTree = Sel.find(".tree");
     TheJsTree.jstree({
     
                'core'   : {    
                           "multiple"       : false,
                           "check_callback" : true,
           				   "data"           : JsTreeModel,
           				   "themes"         : {
           					   
           					                   "dots"       :true,
           									   "responsive" :false
           									   
           				   }
               }
     
               
     });
	 TheJsTree.on('loaded.jstree' , function (e, data) { 	 
	 
	                               TheJsTree.jstree('open_all');     
	 
	                      var first =	 TheJsTree.find("li").eq(1).attr("id"); 
                                   setTimeout( function(){  TheJsTree.jstree('select_node',first); 
					 
					               Sel.find(".nav-tabs").eq(0).children().eq(0).find("a").trigger("click");
					 
					              },0);	 
	 
	 });
     TheJsTree.on('changed.jstree', function (e, data) { 
	                                                         if( data.node.text!="Countries" ){
															 
															     Sel.UIjson("Obj_DeleteAll");
															     Sel.UIjson("ImportObject" , model["countries"][ data.node.text ], data.node.text );
																 
															     Sel.find(".nav-tabs").eq(0).children().eq(0).find("a").trigger("click");
															 }else{
															     Sel.UIjson("Obj_DeleteAll");
															 }								                            
       								}
    );	 
	
	
	 /**  Expand UI_elements of UIjson instance to create a no-editable "div" element to hold HighCharts **/
	 
     $.UIjson.UI_Elements["highChartsDiv"] = {
	 
	                                  _HTML    : "<div class='highCharts_cont col-md-6 col-lg-6 col-sm-6'></div>",
									Val_Method : function( _HTML , value ){ 

						                              var target = _HTML.highcharts(); 
												      if( $.type( value )!=="undefined" ){ 
													              target.series[0].setData( value );  
													  }else{      
													              return target.series[0].yData;  
													  }
													
						              }
	 };
	 
     /*  Define properties for highchart plugin  */
     newPro1 = {property:'data'  ,  path:"Tokyo"   , assignTo:'highChartsDiv'  , label:'Tokyo Climate'   };
     newPro2 = {property:'data'  ,  path:"NewYork" , assignTo:'highChartsDiv'  , label:'NewYork Climate' };
     newPro3 = {property:'data'  ,  path:"Berlin"  , assignTo:'highChartsDiv'  , label:'Berlin Climate'  };
     newPro4 = {property:'data'  ,  path:"London"  , assignTo:'highChartsDiv'  , label:'London Climate'  }; 
     message = {property:"message"                 , assignTo:"textarea_field" , label:"Team's Comment"  };
	
	
     Sel.UIjson('defineProp',newPro1);
	 Sel.UIjson('defineProp',newPro2);
	 Sel.UIjson('defineProp',newPro3);
	 Sel.UIjson('defineProp',newPro4);
	 Sel.UIjson('defineProp',message); // we define 'message' property last to appear after the graphs In Interface
	 
	 
	 
	 
     /*  Detect UI elements for highchart on CreateUI_elem event and run highchart  */	 

     Sel.on("createUiElement.UIjson",function( e , Obj , propertyObj , el ){

            if( /data/.test( propertyObj.propertyName ) ){
			      $(function () {
				  el.highcharts({
                                                         title: {
                                                             text: 'Monthly Average Temperature',
                                                             x: -20 //center
                                                         },
                                                         subtitle: {
                                                             text: 'Source: WorldClimate.com',
                                                             x: -20
                                                         },
                                                         xAxis: {
                                                             categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                                                 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                                                         },
                                                         yAxis: {
                                                             title: {
                                                                 text: 'Temperature (°C)'
                                                             },
                                                             plotLines: [{
                                                                 value: 0,
                                                                 width: 1,
                                                                 color: '#808080'
                                                             }]
                                                         },
                                                         tooltip: {
                                                             valueSuffix: '°C'
                                                         },
                                                         legend: {
                                                             layout: 'vertical',
                                                             align: 'right',
                                                             verticalAlign: 'middle',
                                                             borderWidth: 0
                                                         },
														 series: [{
                                                                   name: propertyObj.propertyName,
                                                                   data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                                                         }]
	         });
			 });
         }			 
     });

	Sel.on("Obj_PropClear.UIjson",function( e , Obj , propertyObj , el ){
	
	     if( /data/.test(propertyObj.prop_name) ){
                  if( el.highcharts() ){ 
		                el.highcharts().destroy();
				  }		
				 
		 }
		 
	});
	/** An alternative way to add and remove highcharts instance is to define attachEv and detachEv methods inside $.UIjson.UI_Elements["highChartsDiv"] object**/
   

	
	
	
	
	
	
     /* Run Method "exportJsonModel" of UIjson instance to export JSON on a click of a button*/ 	 
	 exampleSection.find("button").eq(0).click( function(){  
	     

	                                    var modelExport =  JSON.stringify(  model   ,JsonBeauty,5 );
	                                     $("#Modela").html(modelExport); 
										 $('#myModal').modal('show');
										 return false;
	});
		
}




</script>

</head>
<body>
<div class="container-fluid">
     <div class="row" id="ban">
	      <h1 class="text-center"> UIjson.js <small class="text-primary">A Jquery plugin with bootstrap's responsiveness</small></h1>
     </div>
	 <div class="row" id="desc"> 
	      <h4 class="text-center"> -- View and Edit your Json models with a responsive bootstrap Interface -- </h4>
	 </div>

	 
     <div id="uijson_cont"></div>
</div>	 
<footer id="foot" class="footer"><h5>UIjson.js Copyright © Chris_B</h5><h5>Bootstrap,jsTree,Jquery and highCharts rights belong to their respective owners</h5></footer>



	 
   <!-- Modal -->
   <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">   
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">UIjson.js Output</h4>
        </div>
        <div class="modal-body">
          <p><pre><code id="Modela"  class="form-control" style="height:auto;" ></code></pre></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>  
    </div>
  </div>
  
</body>
</html>