<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <title>UIjson.js Example : Making a form</title>
 <meta name="keywords"    content="uijson.js,make forms,JSON UI,javascript,Jquery">
 <meta name="description" content="Tool for create and edit JSON model with a bootstrap Interface">
 <meta name="author"      content="Chris B">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta http-equiv="Content-type" content="text/html; charset=utf-8" > 


<!--<script src="js/jquery.js"></script>-->
<!--<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>-->

<link rel="stylesheet" href="../JsTree/themes/default/style.min.css">
<link rel="stylesheet" href="../Bootstrap/css/bootstrap.css">

<script src="http://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
<script src="../jquery-ui.min.js"></script>
<script src="../Bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../JsTree/jstree.min.js" type="text/javascript"></script>

<script src="../UIjson.js"></script>

<style type="text/css">
/* page style */
#ban{

	   background-color    : #16243D;
	   color               : white;

}
#ban h1{

       padding-top         : 20px;    
	   padding-bottom      : 20px;

}
#desc h4 {
 
       padding-top         : 30px;
	   padding-bottom      : 30px;
	   margin-bottom       : 40px;
	   box-shadow          : 0px 4px 20px #91DFEC;
	   margin-top          : 40px;
}


/* footer */
html {
  position            : relative;
  min-height          : 100%;
}
body {

  margin-bottom       : 100px;
}
.footer {
  position            : absolute;
  bottom              : 0;
  width               : 100%;
  height              : 100px;
  background-color    : #f5f5f5;
  padding-top         : 20px;
  padding-bottom      : 20px;
  text-align          : center;
  background-color    : #16243D;
  color               : white;
 
}

/* modal code output */
pre .json-value{
                  color  : red;
}
/* export model button */
.btn-primary  {
                 background-color : #17375F;
}

</style>


<style type="text/css">

/* UIjson example style */

.UIjson_instance { padding-top : 20px; padding-bottom : 20px; }

.tab-pane{
    margin-top:30px;
}


</style>
<script type="text/javascript"> 

 
$(document).ready(function(){

var t,example001,config1;
    
example001  = {
              "name"       : "",
              "age"        : "",
			  "birth"      : "",
              "country"    : "",
			  "married"    : "",
			  "position"   : "",
              "past_jobs"  : []
};
		  

config1 = {  
            "properties" : [ 
			
               { property:"name"      , assignTo:"input_field"    , label:"Name"               },	 
               { property:"age"       , assignTo:"input_field"    , label:"Age"                },
			   { property:"birth"     , assignTo:"input_field"    , label:"Birth Date"         },
               { property:"country"   , assignTo:"select_list"    , label:"Country" , options:["SPAIN","USA","Brazil","Canada","Argentina","France","Mexico","Germany"] },
               { property:"past_jobs" , assignTo:"textarea_field" , label:"Job Experience"     },
               { property:"married"   , assignTo:"radio"          , label:"Marital status"      , options:["married","no married"] },
               { property:"position"  , assignTo:"checkbox"       , label:"Position Preference" , options:["manager","advisor","assistant","public relationships"]  },			   
            ],
            "_Objects"  : [{obj:example001,path:""}],
			"config"    : {dataHolder:{tabName:"About You"}}
};



createExample( config1 , example001 , 1 );


});


function JsonBeauty(key, value) {
	  
       if (typeof value === "string" || typeof value === "number" || typeof value === "boolean"  ) {
         return '<span class=json-value>'+value+'</span>';
       }
       return value;
}


function createExample( config , model , n ){

var exampleSection,Sel,In;


	 exampleSection = $("#uijson_cont").find(".example").eq(0).addClass("insta"+n);
	 Sel            = $("#uijson_cont").find(".UIjson_instance").eq(0);
 
     In             = Sel.UIjson( config );	 //create UIjson Instance!
	 
    
	 
	 /** We use _Obj_PropRender.UIjson to show which of the fields must be filled.**/		
	 
     Sel.on("createUiElement.UIjson",function( e , Obj , propertyObj , el ){ 

             if( /(age|name|married)/i.test(propertyObj.propertyName) ){
			        el.addClass("has-error");
			  }	  	 
	 
	 });
	 
     Sel.find(".nav-tabs").eq(0).children().eq(0).find("a").trigger("click");	
	 
	 /** We use _Obj_Update.UIjson event to validate values and we add or remove error,success classes accordingly **/
	 
     //---Sel.on("Obj_Update.UIjson",function( e , Obj  ){
	 Sel.on("Obj_PropUpdate.UIjson",function( e , UIjsonObj  , propName ){       
			  /** 
			   *  Method Obj_Elements will return rendered elements. 
			   *  We know that none of them has arrEach set to true, 
			   *  that's why we take the first and the only element of returned array.			  
			  **/
			  
              var ageEl     = Sel.UIjson("Obj_Elements", UIjsonObj , "age"     )[0],
			      nameEl    = Sel.UIjson("Obj_Elements", UIjsonObj , "name"    )[0],
			      marryEl   = Sel.UIjson("Obj_Elements", UIjsonObj , "married" )[0];
			  
	          if(  !/^[1-9]{1}[0-9]{0,1}$/.test( UIjsonObj.obj["age"] ) )
			  {
 			     
			     ageEl.removeClass("has-success").addClass("has-error"); 
				 
			  }else{
			     
			     ageEl.removeClass("has-error").addClass("has-success");
			  }

	          if(   !/^[a-zA-Z\s]+$/.test( UIjsonObj.obj["name"] ) )
			  {
			     nameEl.removeClass("has-success").addClass("has-error"); 
				 
			  }else{ 
			  
			     nameEl.removeClass("has-error").addClass("has-success");
			  }	

	          if(   UIjsonObj.obj["married"] ==="" )
			  {
			     marryEl.removeClass("has-success").addClass("has-error"); 
				 
			  }else{ 
			  
			     marryEl.removeClass("has-error").addClass("has-success");
			  }	
			  			  
	});	
	
	
	/** We bind a reference of our Object example001 to bootstrap modal**/

	exampleSection.find("button").eq(0).click( function(){
	     
	                                    var modelExport =  JSON.stringify(  model   ,JsonBeauty,5 );
	                                     $("#Modela").html( modelExport ); 
										 $('#myModal').modal('show');
										 return false;
	});
	
		
}




</script>

</head>
<body>
<div class="container-fluid">

     <div class="row" id="ban">
	      <h1 class="text-center"> UIjson.js <small class="text-primary">A Jquery plugin with bootstrap's responsiveness</small></h1>
     </div>
	 
	 <div class="row" id="desc"> 
	      <h4 class="text-center"> -- View and Edit your Json models with a responsive bootstrap Interface -- </h4>
	 </div>

	 
     <div id="uijson_cont">
	 
	 
                  <div class="row example">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                      <div class="row config">
                        <div class="col-xs-12 col-sm-12 col-md-12">
						
                            <h4>Using UIjson and its Events and methods to create form with validation</h4>
							
                            <div class="row">
							
                               <div class="UIjson_instance col-xs-12 col-sm-12 col-md-12" style="min-height:500px">
                                  <ul role="tablist" class="nav UIjson nav-tabs"></ul>
                                  <div class="tab-content UIjson sections"></div>			
                               </div>
							   
                            </div>
							
                            <div class="row">
                               <div  class="col-xs-12 col-sm-12 col-md-12">
                  	     		   <button  style="margin-bottom:10px;" type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">See Model</button>
                               </div>				
                           </div>
						   
                         </div>
                      </div>
                    </div>
                  </div>	 
	 
	 

	 </div>	 
	 
	 
</div>	 
<footer id="foot" class="footer"><h5>UIjson.js Copyright Â© Chris_B</h5><h5>Bootstrap and Jquery rights belong to their respective owners</h5></footer>
	 
   <!-- Modal -->
   <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">   
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">UIjson.js Output</h4>
        </div>
        <div class="modal-body">
          <p><pre><code id="Modela"  class="form-control" style="height:auto;" ></code></pre></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>  
    </div>
  </div>
	 
	 


</body>
</html>