/*Copyright Â©  All Rights Reserved. Created By Chris B*/(function(e){e.UIjson={version:"v1.0.0.0",bootstrap_version:"3",jquery_version:"2.2",jquery_ui_version:"v1.11.4"};e.UIjson.defaults={binders:{tabs:".UIjson.nav-tabs",sections:".UIjson.sections",obj:".UIjson.obj_UI"},dataHolder:{tabName:"General",path:!1,label:"&nbsp",arrEach:!1,options:!1,array_Api:{sortable:!0,add:!0,remove:!0}}};e.UIjson.Instance=function(){this.Settings="";this.Element=null;this._Objects=[];this.ActiveTab="General";this.Tabs={};this.Sections={};this.Dataholders=[]};e.UIjson.create=
function(a,b){var c=new e.UIjson.Instance;c.Element=a;c.Settings=e.extend(!0,{},e.UIjson.defaults,b.config);e(a).data("UIjson",c);c.init(a,b);return c};e.UIjson.Obj=function(a,b){this.obj=a;this.ui_wrapper=null;this.dataholders=[];"undefined"!==e.type(b)&&(this.path=b)};e.UIjson.Instance.prototype={init:function(a,b){var c,d=0;if(b.hasOwnProperty("properties")&&b.properties)for(c=b.properties.length,d=0;d<c;d++)this.defineProp(b.properties[d]);if(b.hasOwnProperty("_Objects")&&b._Objects)for(c=b._Objects.length,
d=0;d<c;d++)this.ImportObject(b._Objects[d].obj,b._Objects[d].path);this.Element.find(".nav-tabs").eq(0).children().eq(0).find("a").trigger("click")},destroy:function(){for(var a in this.Tabs)e.UIjson.Tabs.detachEv(this.Tabs[a],this);this.ObjAll_Clear();this.Element.find(this.Settings.binders.tabs).empty();this.Element.find(this.Settings.binders.sections).empty();this.Settings="";this._Objects=[];this.Tabs={};this.Sections={};this.Dataholders=[];this.Element.removeData("UIjson");this.Element=null},
defineTab:function(a){this.Tabs[a]=e.UIjson.Tabs.createTab(a);this.Sections[a]=e.UIjson.Sections.createSection(a);this.Tabs[a].element.appendTo(this.Element.find(this.Settings.binders.tabs));this.Sections[a].element.appendTo(this.Element.find(this.Settings.binders.sections));e.UIjson.Tabs.attachEv(this.Tabs[a],this);return this.Tabs[a]},tabOrder:function(a){var b,c=[],d=this;e(a).each(function(a,e){for(b in d.Tabs)d.Tabs[b].name===e&&c.push(d.Tabs[b])});e.UIjson.Tabs.tabOrder(c)},removeTab:function(a){var b,
c,d,f,g=this._Objects,h=g.length;if(this.Tabs.hasOwnProperty(a)){d=this.Tabs[a];f=this.Sections[a];for(b=0;b<this.Dataholders.length;b++)if(this.Dataholders[b].tabName===a)for(this.propTab(this.Dataholders[b],this.Settings.dataHolder.tabName),c=0;c<h;c++)this.Obj_PropClear(g[c],this.Dataholders[b].prop_name);e.UIjson.Tabs.deleteTab(d);delete this.Tabs[a];e.UIjson.Sections.deleteSection(f);delete this.Sections[a]}},propTab:function(a,b){var c;if("undefined"!==e.type(b))c=!1===this.Tabs.hasOwnProperty(b)?
this.defineTab(b):this.Tabs[b],a.tabName=b,a.tab=c.element,a.section=this.Sections[b];else return a.tabName},defineProp:function(a){var b,c;a=e.extend(!0,{},this.Settings.dataHolder,a);if(!e.UIjson.UI_Elements.hasOwnProperty(a.assignTo))return alert(a.assignTo+" does not exist in UIjson "),!1;c=a.tabName;!1===this.Tabs.hasOwnProperty(c)&&(b=this.defineTab.apply(this,[c]));b=this.Tabs[c];c=this.Sections[c];a.tabName=b.name;a.tab=b.element;a.section=c.element;a.assignTo=e.UIjson.UI_Elements[a.assignTo];
e(this.Dataholders).each(function(b,c){if(c.prop_name===a.property&&c.path===a.path)return e.extend(!0,c,a),c});a.prop_name=a.property;b=e.extend(!0,{},this.Settings.dataHolder,a);this.Dataholders.push(b);return b},unsetProp:function(a){var b,c,d;for(b=0;b<this._Objects.length;b++)for(d=this._Objects[b],c=0;c<d.dataholders.length;c++)if(d.dataholders[c].config===a){d.dataholders.splice(c,1);break}for(b=0;b<this.Dataholders.length;b++)this.Dataholders[b]===a&&this.Dataholders.splice(b,1)},getProp:function(a,
b){var c=!1;"string"===e.type(a)?e(this.Dataholders).each(function(d,f){f.prop_name===a&&("undefined"!==e.type(b)?f.path===b&&(c=f):c=f)}):c=a;return c},ImportObject:function(a,b){var c=new e.UIjson.Obj(a,b);this._Objects.push(c);this.Obj_initDataholders(c);this.Element.trigger("ImportObject.UIjson",[c])},getUIjsonObj:function(a){var b=!1;e(this._Objects).each(function(c,d){d.obj===a&&(b=d)});return b},Obj_Delete:function(a){var b=this;e(this._Objects).each(function(c,d){if(d===a)return b.Obj_ClearRender(a),
b._Objects.splice(c,1),!1})},Obj_DeleteAll:function(){var a=this;e(this._Objects).each(function(b,c){a.Obj_ClearRender(c);a._Objects.splice(b,1);return!1})},Obj_Elements:function(a,b){var c,d,f=a.dataholders,e=[];for(c=0;c<f.length;c++)if(b){if(f[c].propertyName===b)for(d=0;d<f[c].elements.length;d++)e.push(f[c].elements[d])}else for(d=0;d<f[c].elements.length;d++)e.push(f[c].elements[d]);return e},Obj_Update:function(a){this.Obj_PropUpdate(a);this.Element.trigger("Obj_Update.UIjson",[a])},ObjAll_Render:function(){var a,
b=this._Objects,c=b.length,d=this.ActiveTab;for(a=0;a<c;a++)this.Obj_ClearRender(b[a]),this.Obj_Render(b[a],d);this.Element.trigger("ObjAll_Render.UIjson",[this])},ObjAll_Clear:function(){var a,b=this._Objects,c=b.length;for(a=0;a<c;a++)this.Obj_ClearRender(b[a]);this.Element.trigger("ObjAll_Clear.UIjson",[this])},ObjAll_Redraw:function(){var a,b=this._Objects,c=b.length;for(a=0;a<c;a++)this.Obj_Redraw(b[a]);this.Element.trigger("ObjAll_Redraw.UIjson",[this])},Obj_initDataholders:function(a){var b,
c=[];this.Obj_ClearRender(a);a.dataholders=[];e.each(this.Dataholders,function(d,f){a.obj.hasOwnProperty(f.prop_name)&&(!f.path||!a.path||f.path&&a.path&&e.UIjson.helpers.checkPath(a.path,f.path))&&(c.push(f.prop_name),b={propertyName:f.prop_name,elements:[],config:f},a.dataholders.push(b))});return c},Obj_Redraw:function(a){this.Obj_ClearRender(a);this.Obj_Render(a)},Obj_Render:function(a){a.ui_wrapper=e('<div class="col-md-12 col-lg-12 col-sm-12"><label class="path-label control-label">'+(a.path||
"")+'</label><div class="UIjson_ObjWrapper row"></div></div>').appendTo(this.Sections[this.ActiveTab].element);this.Obj_PropRender(a)},Obj_PropRender:function(a,b){var c,d,f,g,h,l=a.path||"",k=a.dataholders,m=k.length;for(c=0;c<m;c++)if(f=k[c],("undefined"===e.type(b)||f.propertyName===b)&&f.config.tabName===this.ActiveTab)if(h=a.obj[f.propertyName],a.ui_wrapper||(a.ui_wrapper=e('<div class="col-md-12 col-lg-12 col-sm-12"><label class="path-label control-label">'+l+'</label><div class="UIjson_ObjWrapper row"></div></div>').appendTo(this.Sections[this.ActiveTab].element)),
f.config.arrEach&&e.UIjson.helpers.IsArrayOfStrings(h))for(f.array_wrapper=this.initArrayTemplate(a,f,a.ui_wrapper.find(".UIjson_ObjWrapper")),d=0;d<h.length;d++)g=e.UIjson.Actions.ArrCreateUI_Elem({data:{UIjsonInstance:this,UIjsonObj:a,dtHd:f,parent:f.array_wrapper}}),f.config.assignTo.Val_Method(g,h[d]);else g=this.createUiElement(a,f,a.ui_wrapper.find(".UIjson_ObjWrapper")),f.config.assignTo.Val_Method(g,a.obj[f.propertyName])},Obj_ClearRender:function(a){if(!a.ui_wrapper)return!1;this.Obj_PropClear(a);
a.ui_wrapper.remove();a.ui_wrapper=null;this.Element.trigger("Obj_ClearRender.UIjson",[a])},Obj_PropClear:function(a,b){var c,d,f,g,h=a.dataholders,l=h.length;for(d=0;d<l;d++)if(f=h[d],"undefined"===e.type(b)||f.propertyName===b){for(g=0;g<f.elements.length;g++)c=f.elements[g],f.config.assignTo.hasOwnProperty("detachEv")&&f.config.assignTo.detachEv(this,c),c.find(".glyphicon-remove").off("click",e.UIjson.Actions.RemoveUI_Elem),this.Element.trigger("Obj_PropClear.UIjson",[a,f.config,c]),c.remove();
f.array_wrapper&&(f.array_wrapper.parent().find(".glyphicon-plus").off("click",e.UIjson.Actions.ArrCreateUI_Elem),"undefined"!==typeof jQuery.ui&&f.array_wrapper.hasClass("ui-sortable")&&f.array_wrapper.sortable("destroy"),f.array_wrapper=null);f.elements=[]}},Obj_PropRedraw:function(a,b){var c,d,f=a.dataholders,g=f.length;for(c=0;c<g;c++)if(d=f[c],"undefined"===e.type(b)||d.propertyName===b)this.Obj_PropClear(a,b),this.Obj_PropRender(a,b)},Obj_PropUpdate:function(a,b){var c,d,f=[],g,h=a.dataholders,
l=h.length;for(d=0;d<l;d++)if(g=h[d],"undefined"===e.type(b)||g.propertyName===b){if(g.array_wrapper&&g.config.arrEach){for(c=0;c<g.elements.length;c++)f.push(g.config.assignTo.Val_Method(g.elements[c]));a.obj[g.propertyName]=f}else 1!==g.elements.length||g.config.arrEach||(a.obj[g.propertyName]=g.config.assignTo.Val_Method(g.elements[0]));this.Element.trigger("Obj_PropUpdate.UIjson",[a,g.propertyName])}},createUiElement:function(a,b,c){var d,f=b.config;if(!f.assignTo)return!1;d=e(f.assignTo._HTML);
f.hasOwnProperty("label")&&d.find("label").html(f.label);f.options&&f.assignTo.hasOwnProperty("_Options")&&f.assignTo._Options(d,f.options);f.assignTo.hasOwnProperty("attachEv")&&f.assignTo.attachEv(this,a,b,d);c&&c.append(d);b.elements.push(d);this.Element.trigger("createUiElement.UIjson",[a,b,d]);return d},initArrayTemplate:function(a,b,c){var d=this,f,g;f=e('<div class="col-md-12 col-lg-12 col-sm-12"><label class="control-label">'+b.config.label+'</label><div class="UIjsonArraySortable row"></div></div>').appendTo(c);
e('<div class="glyphicon glyphicon-plus pull-right" aria-hidden="true" style="color:green;padding-left:10px;"></div>').appendTo(f.find("label")).on("click",{UIjsonInstance:this,UIjsonObj:a,dtHd:b,parent:c.find(".UIjsonArraySortable")},e.UIjson.Actions.ArrCreateUI_Elem);g=f.find(".UIjsonArraySortable");"undefined"!==typeof jQuery.ui&&(g.hasClass("ui-sortable")&&g.sortable("destroy"),g.sortable({cursor:"move",revert:!0,helper:"clone"}),g.on("sortstart",function(a,b){b.placeholder.height(b.item.height());
g.height(b.item.parent().height())}),g.on("sortstop",function(c,f){var k,m,n=[];f.placeholder.height("");g.height("");m=f.item.parent().children();for(k=0;k<m.length;k++)n.push(e(m[k]));b.elements=n;d.Obj_PropUpdate(a,b.propertyName)}));return g}};e.UIjson.Actions={clickTab:function(a){var b=a.data;a=b.UIjsonInstance;var b=b.TAB_obj,c;b.element.parent().children().removeClass("active");b.element.addClass("active");c=a.Sections[b.name];c.element.parent().children().hide();c.element.show();a.ActiveTab=
b.name;a.ObjAll_Render()},ArrCreateUI_Elem:function(a){var b=a.data,c=b.UIjsonInstance,d=b.UIjsonObj,f=b.dtHd,b=c.createUiElement(d,f,b.parent);b.find(".control-label").hide();e('<div class="UIjsonRemove glyphicon glyphicon-remove pull-right" style="color:red;padding: 5px;" aria-hidden="true"></div>').prependTo(b.find("div").eq(0)).on("click",{elem:b,UIjsonObj:d,dtHd:f,UIjsonInstance:c},e.UIjson.Actions.ArrRemoveUI_Elem);a.target&&c.Obj_PropUpdate(d,f.propertyName);return b},ArrRemoveUI_Elem:function(a){var b=
a.data,c=b.UIjsonInstance,d=b.UIjsonObj,f=b.dtHd,b=b.elem;b.find(".glyphicon-remove").off("click",e.UIjson.Actions.RemoveUI_Elem);for(var g=0;g<f.elements.length;g++)if(f.elements[g].get(0)===b.get(0)){f.elements.splice(g,1);b.remove();break}a.target&&c.Obj_PropUpdate(d,f.propertyName)}};e.UIjson.UI_Elements={input_field:{_HTML:'<div class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><div class="form-group"><label class="control-label"></label><input class="form-control" type="text"></div></div>',Val_Method:function(a,
b){var c=a.find("input");if("undefined"!==e.type(b))c.val(b);else return c.val()},attachEv:function(a,b,c,d){d.find("input").eq(0).on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("input").eq(0).off("change",a.Obj_PropUpdate)}},textarea_field:{_HTML:'<div class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><div class="form-group"><label    class="control-label"></label><textarea class="form-control" type="text" ></textarea></div></div>',Val_Method:function(a,
b){var c=a.find("textarea");if("undefined"!==e.type(b))c.val(b);else return c.val()},attachEv:function(a,b,c,d){d.find("textarea").eq(0).on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("textarea").eq(0).off("change",a.Obj_PropUpdate)}},select_list:{_HTML:'<div class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><div class="form-group"><label  class="control-label"></label><select class="form-control" type="text" ></select></div></div>',_Options:function(a,
b){var c=a.find("select");e(b).each(function(a,b){c.append('<option value="'+b+'">'+b+"</option>")})},Val_Method:function(a,b){var c=a.find("select");if("undefined"!==e.type(b))c.val(b);else return c.val()},attachEv:function(a,b,c,d){d.find("select").eq(0).on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("select").eq(0).off("change",a.Obj_PropUpdate)}},checkbox:{_HTML:'<div class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><div class="form-group"><label  class="control-label main_label"></label></div></div>',
_Options:function(a,b){var c=a.find(".form-group");e(b).each(function(a,b){c.append('<div   class="checkbox"><label class="control-label"><input type="checkbox" name="k" value="'+b+'"></label>'+b+"</div>")})},Val_Method:function(a,b){var c=[];if("undefined"!==e.type(b))a.find("input").prop("checked",!1),"array"===e.type(b)?e(b).each(function(c){a.find('input[value="'+b[c]+'"]').prop("checked",!0)}):a.find('input[value="'+b+'"]').prop("checked",!0);else return a.find("input:checked").each(function(a,
b){c.push(e(b).attr("value"))}),c},attachEv:function(a,b,c,d){d.find("input").on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("input").off("change",a.Obj_PropUpdate)}},radio:{_HTML:'<div class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><div class="form-group"><label  class="control-label main_label"></label></div></div>',_Options:function(a,b){var c=a.find(".form-group");e(b).each(function(a,b){c.append('<div class="radio"><label class="control-label"><input type="radio" name="k" value="'+
b+'"></label>'+b+"</div>")})},Val_Method:function(a,b){var c;if("undefined"!==e.type(b))c=a.find("input[value='"+b+"']"),0<c.length?c.prop("checked",!0):a.find("input:checked").prop("checked",!1);else return c=a.find("input:checked").val(),"undefined"===e.type(c)&&(c=""),c},attachEv:function(a,b,c,d){d.find("input").on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("input").off("change",a.Obj_PropUpdate)}},thumbnail:{_HTML:'<div class="col-md-2 col-lg-2 col-sm-2  UIjson_el"><div class = "thumbnail"><img src = "" alt = "Image not found"></div><div class = "caption"><div class="form-group"><input class="form-control" type="text"></div></div></div>',
Val_Method:function(a,b){var c=a.find("input");if("undefined"!==e.type(b))a.find("img").attr("src",b),c.val(b);else return c.val()},attachEv:function(a,b,c,d){d.find("input").eq(0).on("change",e.proxy(a,"Obj_PropUpdate",b,c.propertyName));return d},detachEv:function(a,b){b.find("input").off("change",a.Obj_PropUpdate)}},blockquote:{_HTML:'<blockquote class="col-md-6 col-lg-6 col-sm-6 UIjson_el"><label  class="control-label main_label"></label><p></p></blockquote>',_target:function(a){return a.find("p").eq(0)},
Val_Method:function(a,b){var c=this._target(a);if("undefined"!==e.type(b))c.html(b);else return c.html()}}};e.UIjson.Tabs={tab_HTML:'<li role="presentation"><a data-toggle="tab" href=""></a></li>',createTab:function(a){var b={};b.name=a;b.element=e(this.tab_HTML);b.element.find("a").attr("href","#"+a).html(a);return b},deleteTab:function(a){a.element.find("*").off();a.element.remove()},tabOrder:function(a){for(var b=0,c=a.length,d,b=0;b<c;b++)d=a[b].element,d.appendTo(d.parent())},attachEv:function(a,
b){a.element.find("a").on("click",{UIjsonInstance:b,TAB_obj:a},e.UIjson.Actions.clickTab)},detachEv:function(a,b){a.element.find("a").off("click",e.UIjson.Actions.clickTab)}};e.UIjson.Sections={section_HTML:'<div role="tabpanel"   class="tab-pane tabSection fade in row" style="min-height:300px;"></div>',createSection:function(a){var b={};b.name=a;b.element=e(this.section_HTML);b.element.addClass(a);return b},deleteSection:function(a){a.element.find("*").off();a.element.remove()}};e.UIjson.helpers=
{checkPath:function(a,b){if(b.toString()===a.toString())return!0;b=b.split("/");for(var c=b.length-1;0<=c;c--)(/\d/.test(b[c])||""===b[c])&&b.splice(c,1);a=a.split("/");for(c=a.length-1;0<=c;c--)(/\d/.test(a[c])||""===a[c])&&a.splice(c,1);return b.toString()===a.toString()?!0:!1},IsArrayOfStrings:function(a){if("array"!==e.type(a))return!1;var b=!0;e(a).each(function(a,d){"string"!==e.type(d)&&(b=!1)});return b}};e.fn.UIjson=function(a){var b="string"===typeof a,c=Array.prototype.slice.call(arguments,
1),d=null,f=null;this.each(function(){var g=e(this).data("UIjson")||!1;f=b&&g?g[a]:null;d=b&&f?f.apply(g,c):null;g||b||"object"!==typeof a||(g=e.UIjson.create(e(this),a));if(g&&!b||!0===a)d=g||!1;if(null!==d&&void 0!==d)return!1});return null!==d&&void 0!==d?d:this}})(jQuery);
